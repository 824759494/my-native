<?php
/* 
 *@FileName:LoginAPI.DEV
 *@author:Json Wong
 *@description:用户登录逻辑控制单元，提供登录、登出、登录检查、注册等接口
 *@copyright:Moban Technical Team 
 *@date:2015-9
 */
class LoginController extends CommonController{
	/* 
	*登录
	*GET:{'account':用户账户号，手机，或者邮箱,'pwd':用户密码 MD5加密}		
	*return: 
	*{
	*'user':用户数据结构。参考注释（1）,
	* 'status':登录操作状态。 status值0,1，2,3。0-登录成功，1-密码错误，2-用户账号不存在，3-账户未激活，失效。
	*}
	*/
	public function login();
	/* 图形验证码生成 */
    public function verify_code();
	/* check图形验证码 */
	public function checkVerify($code);
	/* 
	*登出
	*GET方法
	*/
	public function logout();
	/* 
	*注册
	*@type 注册方式 type=mobile手机，type=email邮箱注册,（当type=null时接口为register页面view）
	*@lang 国家语言 ‘ch’中文，‘en’英文
	*POST:
	*{
	*	'acount':账号（邮箱或者电话）,
	*	'pwd':密码 MD5加密
	*}
	*return:
	*{'status':注册操作状态 true成功 false失败}
	*/
	public function register($type=null,$lang='ch')
	/* 找回密码视图view接口 ,密码找回页面*/
	public function forgotPassword();
	/* check账号
	*$account 账号（手机或者邮箱）
	*$type 1邮箱 2电话
	*$callback 回调函数 返回后可以调用
	*return：
	*{
	* 'status'：验证结果 true存在 false不存在
	*}
	*/
	public function checkAccount($account,$type,$callback=null)；

	/* 
	*第三方登录接口
	*$type:登录方式 Baidu-百度登录 Diandian-点点登录 Douban-豆瓣登录 Github-github登录
	*Google-google登录 Msn-msn登录 Qq-qq登录 Renren-人人网登录 Sina-sina微博登录 Taobao-淘宝登录
	*Tencent-腾讯微博登录 Wechat-微信登录
	*return:
	*{'url':跳转到授权页面}
	*/
	public function thirdPartLogin($type=null);
	/* 
	*第三方登录回调函数接口，用户参照使用的第三方接口。
	*$type 登录方式
	*$code OAuth2.0认证返回的一个认证码
	*$state用于保持请求和回调的状态，授权请求后原样带回给第三方。该参数可用于防止csrf攻击（跨站请求伪造攻击），建议第三方带上该参数，可设置为简单的随机数加session进行校验
	*return：
	*Android与iOS系统下：
	*'user':用户数据结构。参考注释（1）,
	* 'status':登录操作状态。 status值0,1，2,3。0-登录成功，1-登录失败 2-参数错误
	*}
	*在PC系统下:
	*重定向到主页
	*/
	public function callback($type = null, $code = null,$state=0);
}
/***********************************************************************************************************************************************************
	注释：
	（1）user:
	{
		'verify_exp_mail_time':邮箱验证码失效日期（Unix时间戳秒为单位）,'uid':用户id,'account':用户账号（并非邮箱与手机）,
		'email':邮箱,'nickname':昵称,'birthday':生日（Unix时间戳）,'sex':性别 0女1男,'verify_status':验证状态 verify_status=0|1|2|4|8;
		(验证状态是可以叠加的，以二进制为基础的4位数字。 0未验证，第一位邮箱验证（1），第二位手机验证（2）,第三位身份证号码（4），第四位身份证照片（8）,
		'address':地址,'emotional_partner':感情状态 0-单身，1-已婚,'countryid':国家id,'provinceid':省份id,'cityid':城市id,'intr':个人介绍,'mobile':手机号码,
		'phone':电话,'realname':真实姓名,'idnum':身份证id,'facebook':facebook账号,'qq':qq账号,'wechat':微信账号,'msn':msn账号,'vip':vip等级,'work':职业,
		'sex_orientation':性取向 0-女 1-男 2-探索中,'type':注册方式 1-email 2-phone,'headImg':{
		'path':路径,'name':图片名称,"type":头像类型 0默认图像（当type=0时没有path与name字段，img_id为默认图片编号。根据编号选取图片） 1自定义,'img_id'：图片id
		}
	}
***********************************************************************************************************************************************************/
?>